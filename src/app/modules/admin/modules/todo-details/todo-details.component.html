<div class="container">
  <div class="content">
    @if (bucket) {
    <div class="bucket">
      <p class="title">
        <app-text>{{ bucket.title }}</app-text>
        <app-icon
          *ngIf="!bucket.public"
          [name]="'lock'"
          class="icon"
        ></app-icon>
      </p>

      <div class="action">
        <app-sidebar [contentTemplate]="customContent"></app-sidebar>
        <app-open-form
          [formName]="'edit bucket'"
          [icon]="'edit'"
          [id]="bucket.id"
          [label]="false"
        >
        </app-open-form>
        <app-open-form
          [buttonType]="'danger'"
          [formName]="'delete'"
          [delete]="'deleteBucket'"
          [icon]="'delete'"
          [id]="bucket.id"
          [label]="false"
        >
        </app-open-form>
      </div>
    </div>
    <div class="title-action">
      <app-open-form
        [formName]="'add bucket items'"
        [icon]="'plus'"
        [id]="todoId"
      >
      </app-open-form>
      <app-search-field (searchContent)="onSearch($event)"></app-search-field>
    </div>
    }@else {<app-empty></app-empty>}
    <div *ngIf="TotalBucket()" class="flex">
      <div class="flex done">
        <app-icon [name]="'check'" class="icon"></app-icon>
        <p>{{ totalBucketDone ? totalBucketDone : 0 }}</p>
      </div>
      <p>/</p>
      <p>{{ TotalBucket() }}</p>
    </div>
    @if(bucket){
    <app-todo-item
      [done]="0"
      [searchContent]="searchContent"
      (totalBucket)="getTotalBucketNotDone($event)"
    ></app-todo-item>
    <app-todo-item
      [done]="1"
      [searchContent]="searchContent"
      (totalBucket)="getTotalBucketDone($event)"
    ></app-todo-item>
    @if(!TotalBucket()){ <app-empty></app-empty>
    } }
  </div>
</div>

<ng-template #customContent let-searchContent="searchContent">
    <app-bucket-list [searchContent]="searchContent"></app-bucket-list>
</ng-template>