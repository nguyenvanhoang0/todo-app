<div [ngClass]="bucketItem.length > 0 ? 'container' : ''">
  <div
    class="group-bucket-item"
    [ngClass]="
      bucketItem.length < configurationParams.limit &&
      totalBucketItems > configurationParams.limit
        ? 'and'
        : ''
    "
  >
    @for (bucket of bucketItem; track bucket.id) {
    <div
      class="bucket-item"
      [ngClass]="bucket.done ? 'finish' : 'unfinished'"
      (click)="openItemDetailsView(true, bucket)"
      (keydown.enter)="openItemDetailsView(true, bucket)"
      tabindex="0"
    >
      <div>
        <app-text [line]="1" class="content">{{ bucket.content }}</app-text>
        <p class="time">{{ bucket.createdAt | timeAgo }}</p>
      </div>

      <app-open-form
        (click)="blockFormClosing($event)"
        (keydown.enter)="openItemDetailsView(true, bucket)"
        tabindex="0"
        [formName]="'edit bucket items'"
        [icon]="'edit'"
        [id]="bucket.id"
        [parentId]="bucket.bucketId"
        [label]="false"
        [buttonType]="'text'"
        [content]="bucket.content"
      >
      </app-open-form>
    </div>
    }@empty { @if (message.isLoading) {
    <nz-skeleton [nzActive]="true"></nz-skeleton>} }
    <div class="pagination">
      <nz-pagination
        *ngIf="totalBucketItems > configurationParams.limit"
        [nzPageIndex]="configurationParams.page"
        [nzTotal]="totalBucketItems"
        [nzPageSize]="configurationParams.limit"
        (nzPageIndexChange)="onPageChange($event)"
      ></nz-pagination>
    </div>
  </div>

  <app-open-modal
    [isVisible]="itemDetailsView"
    (Visible)="handleItemDetailsView($event)"
  >
    <app-todo-item-details
      *ngIf="bucketSelectItem"
      [bucketId]="todoId"
      (done)="handleItemDetailsView($event)"
      [bucketItem]="bucketSelectItem"
    ></app-todo-item-details>
  </app-open-modal>
</div>
